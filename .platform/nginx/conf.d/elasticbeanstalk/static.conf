# .platform/nginx/conf.d/elasticbeanstalk/static.conf
location /static/ {
    alias /var/app/current/staticfiles/;
    access_log off;
    expires max;
    
    add_header X-Content-Type-Options "nosniff" always;
    add_header Referrer-Policy "same-origin" always;
    add_header X-Frame-Options "DENY" always;

    # Site isolation / Spectre-style protections
    add_header Cross-Origin-Opener-Policy "same-origin" always;
    add_header Cross-Origin-Embedder-Policy "require-corp" always;
    add_header Cross-Origin-Resource-Policy "same-origin" always;

    # Permissions Policy â€“ fixes ZAP 10063
    add_header Permissions-Policy "geolocation=(), microphone=(), camera=()" always;

    # CSP (keep it consistent with your middleware)
    add_header Content-Security-Policy "default-src 'self'; script-src 'self'; style-src 'self' https://cdn.jsdelivr.net; img-src 'self' https://images.unsplash.com data:; font-src 'self' data:; frame-ancestors 'none'; base-uri 'self'; form-action 'self'" always;
}
